# Interactive Setup Guide

## Overview

The Simple Memory MCP Server now includes an interactive setup wizard that automatically configures your environment for optimal performance with custom memory storage and Obsidian integration.

## Installation Flow

### 1. One-Command Installation
```bash
curl -fsSL https://raw.githubusercontent.com/your-username/simple-memory-mcp/main/install.sh | bash
```

### 2. Interactive Configuration
The setup wizard will guide you through:

#### Memory Storage Configuration
```
üìÅ Memory Storage Configuration
Where should memory be stored? [/Users/you/.cursor/memory.json]: 
```

**Options:**
- Press Enter for default location
- Enter custom path like `/Users/you/Documents/AI-Memory/memory.json`
- The directory will be created automatically

#### Obsidian Integration Setup
```
üóÇÔ∏è Obsidian Integration
Do you use Obsidian? (y/n) [n]: y
```

If you answer "yes":

**Vault Auto-Detection:**
```
üîç Detecting Obsidian vaults...

üìö Found Obsidian vaults:
  1. My Knowledge Base (/Users/you/Documents/MyVault)
  2. Work Notes (/Users/you/Desktop/WorkVault)
  3. Personal Wiki (/Users/you/Dropbox/PersonalWiki)

Choose vault (1-3) or enter custom path [1]: 2
‚úÖ Selected vault: Work Notes
```

**Auto-Export Configuration:**
```
Enable auto-export after entity creation? (y/n) [n]: y
Export format (markdown/dataview/canvas/all) [markdown]: dataview
```

**Export Formats:**
- `markdown` - Individual entity files with relationships
- `dataview` - Business intelligence structure with queries
- `canvas` - Visual network diagram
- `all` - All formats in organized folders

### 3. Automatic MCP Client Configuration

The setup automatically configures your MCP clients:

**Claude Desktop Configuration:**
```json
{
  "mcpServers": {
    "simple-memory": {
      "command": "node",
      "args": ["/path/to/simple-memory-mcp/index.js"],
      "env": {
        "MEMORY_PATH": "/Users/you/Documents/AI-Memory",
        "OBSIDIAN_VAULT_PATH": "/Users/you/Desktop/WorkVault",
        "OBSIDIAN_AUTO_EXPORT": "true",
        "OBSIDIAN_EXPORT_FORMAT": "dataview"
      }
    }
  }
}
```

## Configuration Files Generated

### 1. Main Configuration: `~/.simple-memory-mcp-config`
```json
{
  "memoryPath": "/Users/you/Documents/AI-Memory/memory.json",
  "obsidianVaultPath": "/Users/you/Desktop/WorkVault",
  "obsidianAutoExport": true,
  "obsidianExportFormat": "dataview",
  "createdAt": "2024-01-15T10:30:00.000Z",
  "version": "1.1.0"
}
```

### 2. Environment File: `~/.simple-memory-mcp.env`
```bash
# Simple Memory MCP Server Configuration
# Generated by setup wizard

MEMORY_PATH="/Users/you/Documents/AI-Memory/memory.json"
OBSIDIAN_VAULT_PATH="/Users/you/Desktop/WorkVault"
OBSIDIAN_AUTO_EXPORT=true
OBSIDIAN_EXPORT_FORMAT=dataview
```

## Using Your Configuration

### Automatic Features
Once configured, these features work automatically:

1. **Custom Memory Location**: All entities stored in your chosen location
2. **Auto-Export** (if enabled): Entities automatically exported to Obsidian after creation
3. **MCP Client Integration**: Your AI assistants can use all tools immediately

### Manual Export
Even without auto-export, you can manually export anytime:
```
"Export my knowledge graph to Obsidian in dataview format"
```

### Reconfiguration
Run the setup again anytime to change settings:
```bash
git clone https://github.com/your-username/simple-memory-mcp.git
cd simple-memory-mcp
npm install
node setup-claude-server.js
```

## Vault Auto-Detection

The setup wizard automatically searches common locations:

**macOS:**
- `~/Documents`
- `~/Desktop`
- `~/Documents/Obsidian`
- `~/Library/Mobile Documents/com~apple~CloudDocs` (iCloud)
- `~/Dropbox`
- `~/OneDrive`

**Windows:**
- `%USERPROFILE%\Documents`
- `%USERPROFILE%\Desktop`
- `%USERPROFILE%\Documents\Obsidian`
- `%USERPROFILE%\Dropbox`
- `%USERPROFILE%\OneDrive`

**Linux:**
- `~/Documents`
- `~/Desktop`
- `~/Dropbox`
- `~`

**Detection Method:** Looks for directories containing `.obsidian` folder

## Troubleshooting

### No Vaults Detected
If no vaults are found automatically:
1. Enter the full path to your vault manually
2. Ensure your vault has a `.obsidian` folder
3. Check permissions on the vault directory

### Permission Issues
If setup fails with permission errors:
```bash
# Fix directory permissions
chmod 755 ~/Documents/AI-Memory
```

### Configuration Conflicts
If you have existing configurations:
- Setup creates backups before modifying files
- Use `--debug` flag to see detailed information
- Check backup files: `claude_desktop_config.json.backup.{timestamp}`

### Reconfigure Existing Setup
To change configuration without reinstalling:
```bash
node setup-claude-server.js --debug
```

## Advanced Usage

### Custom Script Integration
Source the environment file in your own scripts:
```bash
source ~/.simple-memory-mcp.env
echo "Memory stored at: $MEMORY_PATH"
```

### Programmatic Configuration
Load configuration in Node.js:
```javascript
import fs from 'fs/promises';
import path from 'path';
import os from 'os';

const configPath = path.join(os.homedir(), '.simple-memory-mcp-config');
const config = JSON.parse(await fs.readFile(configPath, 'utf8'));

console.log('Memory path:', config.memoryPath);
console.log('Obsidian vault:', config.obsidianVaultPath);
```

### Multiple Vault Support
For multiple vaults, run setup multiple times with different configurations or manually edit the config files.

## Security Considerations

### File Permissions
- Configuration files are created with user-only access
- Memory files inherit directory permissions
- Obsidian vaults maintain their existing permissions

### Sensitive Data
- No API keys or sensitive data stored in configuration
- Memory files contain only the entities you create
- All data remains local to your machine

### Backup Strategy
- Setup creates automatic backups of MCP client configs
- Consider backing up your memory files
- Configuration files can be recreated by running setup again

---

*For more information, see the main [README](../README.md) or [API documentation](./API.md).*